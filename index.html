<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Slider Widget</title>
<style>
:root {
  --accent:#5b8cff;
  --btn-size:48px;
  --gap:14px;
}
body, html {
  margin:0; padding:0; font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
/* Carousel */
.carousel {
  position:relative; overflow:hidden; border-radius:18px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.08));
  user-select:none;
}
.track {
  display:flex; transition:transform .35s cubic-bezier(.2,.9,.2,1);
  will-change:transform; touch-action: pan-y;
}
.slide { min-width:100%; padding:var(--gap); box-sizing:border-box; }
.slide-inner {
  border-radius:14px; overflow:hidden; background:#111;
  height:520px; display:flex; align-items:center; justify-content:center;
}
.slide-inner img { display:block; width:100%; height:100%; object-fit:cover; }

/* Buttons */
.btn {
  position:absolute; top:50%; transform:translateY(-50%);
  width:var(--btn-size); height:var(--btn-size);
  border-radius:50%; background:rgba(5,10,30,0.6);
  display:flex; align-items:center; justify-content:center;
  cursor:pointer;
}
.btn svg { width:20px; height:20px; fill:#fff; }
.btn.left{ left:12px; } .btn.right{ right:12px; }

/* Dots */
.dots { display:flex; gap:8px; justify-content:center; padding:12px 0; }
.dot { width:10px; height:10px; border-radius:50%; background:rgba(255,255,255,0.18); cursor:pointer; }
.dot.active { background:var(--accent); }

/* Lightbox */
.lightbox {
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(2,6,23,0.8); z-index:60; padding:30px;
}
.lightbox.open { display:flex; }
.lightbox .carousel { max-width:1200px; width:100%; height:calc(100vh - 120px); }
.controls-top { position:absolute; top:18px; left:18px; display:flex; gap:10px; }
.close-btn { background:transparent; color:#fff; padding:8px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.06); cursor:pointer; }

/* Responsive */
@media(max-width:800px){ .slide-inner{height:62vw;} .btn{width:40px;height:40px;} }
</style>
</head>
<body>

<div id="carousel" class="carousel">
  <div id="track" class="track"></div>
  <button class="btn left" id="prevBtn"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
  <button class="btn right" id="nextBtn"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
</div>
<div id="dots" class="dots"></div>

<div id="lightbox" class="lightbox">
  <div class="controls-top"><button class="close-btn" id="closeLightbox">Close</button></div>
  <div class="carousel"><div id="lb-track" class="track"></div>
    <button class="btn left" id="lb-prev"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
    <button class="btn right" id="lb-next"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
  </div>
</div>

<script>
const images=[
'https://cdn.shopify.com/s/files/1/0055/5525/7434/files/FlightSimulator2024_Zzmgd3yVzs.png?v=1758567276',
'https://cdn.shopify.com/s/files/1/0055/5525/7434/files/MicrosoftFlightSimulator2024Screenshot2025.09.18-14.43.25.01.png?v=1758567276',
'https://cdn.shopify.com/s/files/1/0055/5525/7434/files/FlightSimulator2024_wfiAFbPbdU.png?v=1758567276',
'https://cdn.shopify.com/s/files/1/0055/5525/7434/files/FlightSimulator2024_Vrg9tEe3Wx.png?v=1758567276',
'https://cdn.shopify.com/s/files/1/0055/5525/7434/files/FlightSimulator2024_pMcjTZrmA3.png?v=1758556386'
];

const track=document.getElementById('track'), carousel=document.getElementById('carousel'),
prevBtn=document.getElementById('prevBtn'), nextBtn=document.getElementById('nextBtn'),
dotsWrap=document.getElementById('dots');

const lightbox=document.getElementById('lightbox'), lbTrack=document.getElementById('lb-track'),
closeLightboxBtn=document.getElementById('closeLightbox'),
lbPrev=document.getElementById('lb-prev'), lbNext=document.getElementById('lb-next');

let index=1, isDragging=false, startX=0, prevTranslate=0, slides=[], lbIndex=1, lbSlides=[];

function makeSlide(src, idx){
  const s=document.createElement('div'); s.className='slide';
  const inner=document.createElement('div'); inner.className='slide-inner';
  const img=document.createElement('img'); img.src=src; img.alt=`Slide ${idx+1}`;
  inner.appendChild(img); s.appendChild(inner);
  inner.addEventListener('click',()=>openLightbox(idx));
  return s;
}

function buildCarousel(){
  track.innerHTML=''; slides=[];
  track.appendChild(makeSlide(images[images.length-1],images.length-1).cloneNode(true));
  images.forEach((src,i)=>track.appendChild(makeSlide(src,i)));
  track.appendChild(makeSlide(images[0],0).cloneNode(true));
  slides=Array.from(track.children);
  dotsWrap.innerHTML='';
  images.forEach((_,i)=>{
    const d=document.createElement('div'); d.className='dot'; d.dataset.i=i;
    d.addEventListener('click',()=>goTo(i)); dotsWrap.appendChild(d);
  });
  index=1; applyTranslate(false); updateDots();
}

function buildLightbox(){
  lbTrack.innerHTML=''; lbSlides=[];
  lbTrack.appendChild(makeSlide(images[images.length-1],images.length-1).cloneNode(true));
  images.forEach((src,i)=>lbTrack.appendChild(makeSlide(src,i)));
  lbTrack.appendChild(makeSlide(images[0],0).cloneNode(true));
  lbSlides=Array.from(lbTrack.children); lbIndex=1; applyLbTranslate(false);
}

function applyTranslate(anim=true){ track.style.transition=anim?'transform .35s cubic-bezier(.2,.9,.2,1)':'none'; track.style.transform=`translateX(${-index*100}%)`; if(!anim) requestAnimationFrame(()=>{track.style.transition='transform .35s cubic-bezier(.2,.9,.2,1)';}); updateDots(); }
function applyLbTranslate(anim=true){ lbTrack.style.transition=anim?'transform .35s cubic-bezier(.2,.9,.2,1)':'none'; lbTrack.style.transform=`translateX(${-lbIndex*100}%)`; if(!anim) requestAnimationFrame(()=>{lbTrack.style.transition='transform .35s cubic-bezier(.2,.9,.2,1)';}); }

function updateDots(){ const d=Array.from(dotsWrap.children); d.forEach(x=>x.classList.remove('active')); const imgIndex=(index-1+images.length)%images.length; if(d[imgIndex]) d[imgIndex].classList.add('active'); }
function goTo(i){ index=i+1; applyTranslate(); }

nextBtn.addEventListener('click',()=>{ index++; applyTranslate(); });
prevBtn.addEventListener('click',()=>{ index--; applyTranslate(); });
lbNext.addEventListener('click',()=>{ lbIndex++; applyLbTranslate(); });
lbPrev.addEventListener('click',()=>{ lbIndex--; applyLbTranslate(); });

document.addEventListener('keydown',e=>{
  if(lightbox.classList.contains('open')){
    if(e.key==='ArrowRight'){ lbIndex++; applyLbTranslate(); }
    if(e.key==='ArrowLeft'){ lbIndex--; applyLbTranslate(); }
    if(e.key==='Escape') closeLB();
  }else{
    if(e.key==='ArrowRight'){ index++; applyTranslate(); }
    if(e.key==='ArrowLeft'){ index--; applyTranslate(); }
  }
});

function openLightbox(i){ buildLightbox(); lightbox.classList.add('open'); lbIndex=i+1; applyLbTranslate(false); document.body.style.overflow='hidden'; }
function closeLB(){ lightbox.classList.remove('open'); document.body.style.overflow=''; }
closeLightboxBtn.addEventListener('click',closeLB);
lightbox.addEventListener('click',e=>{if(e.target===lightbox) closeLB();});

track.addEventListener('transitionend',()=>{ if(index===0) index=images.length; else if(index===slides.length-1) index=1; applyTranslate(false); });
lbTrack.addEventListener('transitionend',()=>{ if(lbIndex===0) lbIndex=images.length; else if(lbIndex===lbSlides.length-1) lbIndex=1; applyLbTranslate(false); });

function pointerDown(e,forLB=false){ isDragging=true; startX=getX(e); if(forLB){ prevTranslate=-lbIndex*carousel.clientWidth; lbTrack.style.transition='none'; lbTrack.setPointerCapture?.(e.pointerId); } else { prevTranslate=-index*carousel.clientWidth; track.style.transition='none'; track.setPointerCapture?.(e.pointerId); } }
function pointerMove(e,forLB=false){ if(!isDragging) return; const dx=getX(e)-startX; if(forLB) lbTrack.style.transform=`translateX(${prevTranslate+dx}px)`; else track.style.transform=`translateX(${prevTranslate+dx}px)`; }
function pointerUp(e,forLB=false){ if(!isDragging) return; isDragging=false; const dx=getX(e)-startX; const t=(carousel.clientWidth||window.innerWidth)*0.2; if(forLB){ if(Math.abs(dx)>t) dx<0?lbIndex++:lbIndex--; applyLbTranslate(); } else { if(Math.abs(dx)>t) dx<0?index++:index--; applyTranslate(); } }
function getX(e){ return (e.touches?e.touches[0].clientX:e.clientX)||e.clientX; }

track.addEventListener('pointerdown',e=>pointerDown(e,false));
track.addEventListener('pointermove',e=>pointerMove(e,false));
track.addEventListener('pointerup',e=>pointerUp(e,false));
track.addEventListener('pointercancel',e=>pointerUp(e,false));
lbTrack.addEventListener('pointerdown',e=>pointerDown(e,true));
lbTrack.addEventListener('pointermove',e=>pointerMove(e,true));
lbTrack.addEventListener('pointerup',e=>pointerUp(e,true));
lbTrack.addEventListener('pointercancel',e=>pointerUp(e,true));

buildCarousel();
window.addEventListener('resize',()=>{ applyTranslate(false); applyLbTranslate(false); });
</script>
</body>
</html>
